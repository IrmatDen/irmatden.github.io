<html>
    <head>
        <title>Ce qu'il nous reste - Sheet</title>
    </head>
    <body>
        <button id="generate-sheet">Generate sheet PDF</button>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/3.0.1/jspdf.umd.min.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const { jsPDF } = window.jspdf;

                const genPdf = function(
                    /*string[]*/ expertise = [],
                    /*string[]*/ marks = [],
                    /*string[]*/ signs = [],
                    /*string*/ name,
                    /*string*/ concept,
                    /*string*/ player,
                    /*string*/ campaign,

                ) {
                    const doc = new jsPDF({ orientation: "landscape", format: "a4", unit: "mm" });

                    doc.addImage("default-fantasy-male-portrait.png", "PNG", 8, 81, 64, 93, "SLOW");

                    doc.addImage("CQNR-sheet.png", "PNG", 0, 0, 297, 210, "", "SLOW");
                    doc.addFont("inkfree.ttf", "Ink Free", "normal");
                    doc.setFont("Ink Free");

                    doc.setFontSize(20);
                    if (expertise.length > 0) {
                        doc.text(expertise[0], 11, 11.5);
                    }
                    if (expertise.length > 1) {
                        doc.text(expertise[1], 11, 23.5);
                    }
                    if (expertise.length > 2) {
                        doc.text(expertise[2], 11, 35.5);
                    }
                    
                    doc.setFontSize(16);
                    if (marks.length > 0) {
                        doc.text(marks[0], 11, 54);
                    }
                    if (marks.length > 1) {
                        doc.text(marks[1], 11, 63.5);
                    }
                    if (marks.length > 2) {
                        doc.text(marks[2], 11, 73.5);
                    }
                    
                    doc.setFontSize(14);
                    if (signs.length > 0) {
                        doc.text(signs[0], 93, 151);
                    }
                    if (signs.length > 1) {
                        doc.text(signs[1], 93, 160);
                    }
                    if (signs.length > 2) {
                        doc.text(signs[2], 93, 170);
                    }

                    doc.setFontSize(24);
                    doc.text(name, 10, 183);

                    doc.setFontSize(18);
                    doc.text(concept, 12, 200);

                    doc.text(player, 219, 13);

                    doc.setFontSize(16);
                    doc.text(campaign, 219, 27);

                    doc.save('CQNR-' + name + '.pdf');
                };
    
                document.getElementById('generate-sheet').addEventListener('click', function() {
                    genPdf(
                        ["sword", "gnashing", "Vainqueur de l'Internationale de blague de Baldur"],
                        ["La mort de sa femme le poursuit toujours", "Défaite de l'Open Blague de Padhiver", "A une jambe de bois"],
                        ["Blagueur", "Soulard", "Sauvage"],
                        "Léon Effligem",
                        "Assassin qui masque son grand coeur",
                        "Bibipe",
                        "Le monde à Léon qui dépote"
                        );
                });
            });
        </script>
    </body>
</html>